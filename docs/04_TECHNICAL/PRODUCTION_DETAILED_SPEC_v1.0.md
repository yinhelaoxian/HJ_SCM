# 生产执行模块详细设计 v1.0

**文档版本**: v1.0  
**状态**: Draft  
**生效日期**: 2026-02-14  
**适用范围**: HJ_SCM 生产执行模块  

---

## 1. 概述

### 1.1 功能范围

| 功能 | 说明 |
|------|------|
| 工单管理 | 创建/查询/状态管理 |
| 投料管理 | 生产领料、批次追溯 |
| 完工汇报 | 报工、产出记录 |
| 批次追溯 | 医养追溯核心 |

---

## 2. 业务流程

### 2.1 生产执行流程

```
需求 → MRP → 工单创建 → 投料 → 生产 → 完工 → 成品入库
               ↓
          Trace ID 关联
```

---

## 3. 功能设计

### 3.1 工单管理

| 功能 | 说明 |
|------|------|
| 从 MRP 创建 | 直接从 MRP 结果创建工单 |
| 状态流转 | PENDING → IN_PROGRESS → COMPLETED |
| 进度跟踪 | 计划 vs 实际 |

### 3.2 投料管理

| 功能 | 说明 |
|------|------|
| 扫码领料 | 批次/序列号扫描 |
| 批次追溯 | 原料 → 成品关联 |
| 库存扣减 | 实时扣减可用库存 |

### 3.3 完工汇报

| 功能 | 说明 |
|------|------|
| 报工 | 实际产量录入 |
| 质检状态 | 质检结果关联 |
| 成品入库 | 自动更新库存 |

---

## 4. Trace ID 关联

### 4.1 追溯链路

```
工单 (MO) → 投料记录 (GI) → 原料批次 → 供应商批次
     ↓
  完工记录 (GR) → 成品批次 → 销售订单 (SO)
```

---

## 5. 与 MRP 联动

### 5.1 接口

| 方法 | 说明 |
|------|------|
| createFromMrp | 从 MRP 创建工单 |
| reportCompletion | 完工汇报 |
| reportIssue | 投料汇报 |

### 5.2 数据流

```
MRP → 工单 → 投料 → 完工 → 库存
              ↓
        Trace ID 关联
```

---

## 6. 验收标准

| 场景 | 验收条件 |
|------|----------|
| 工单创建 | 从 MRP 正确创建 |
| 投料记录 | 批次追溯正确 |
| 完工汇报 | 库存实时更新 |
| 追溯链路 | 100% 可追溯 |

---

> **文档版本**: v1.0  
> **最后更新**: 2026-02-14  
> **状态**: 待评审
