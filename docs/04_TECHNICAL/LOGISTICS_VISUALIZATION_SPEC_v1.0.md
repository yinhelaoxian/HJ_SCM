# 物流可视化规范 v1.0

**文档版本**: v1.0  
**状态**: Draft  
**生效日期**: 2026-02-14  
**适用范围**: HJ_SCM 物流追踪可视化  

---

## 1. 概述

### 1.1 功能范围

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 在途地图 | P1 | 实时位置展示 |
| 路径优化 | P1 | 物流路径建议 |
| 物流追踪 | P0 | 订单关联追踪 |
| 异常预警 | P1 | 延迟预警 |

### 1.2 业务场景

| 场景 | 需求 |
|------|------|
| 供应商发货 | 实时追踪物流位置 |
| 在途物料 | 预计到货时间预测 |
| 客户交付 | 交付进度可视化 |

---

## 2. 地图集成设计

### 2.1 在途地图视图

```
┌─────────────────────────────────────────────────────────────────┐
│                        在途物料地图                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                                                         │  │
│  │                    🌐                                    │  │
│  │                                                         │  │
│  │     🟢 青岛 ──────────────────── 上海 ─── 客户A         │  │
│  │         │                        │         │              │  │
│  │         │  DHL-123456          │         │              │  │
│  │         │  HJ-LA23 500件       │         │              │  │
│  │         │  预计 02-18 到达     │         │              │  │
│  │         │                      │         │              │  │
│  │     🔴 德国 ─── Bühler ────── 青岛                       │  │
│  │         │                      │                          │  │
│  │         │  SF-789012          │                          │  │
│  │         │  HJ-M05 200件       │                          │  │
│  │         │  预计 02-28 到达    │                          │  │
│  │                                                         │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                  │
│  【筛选】                                                        │
│  [全部] ▼ 物流商 [DHL] ▼ 状态 [在途] ▼                         │
│                                                                  │
│  【统计】                                                        │
│  在途：12 单  │  总件数：5,200 件  │  预计本周到货：8 单        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 物流追踪详情

```
┌─────────────────────────────────────────────────────────────────┐
│                     物流追踪 - DHL-123456                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  【基本信息】                                                    │
│  运单号：DHL-123456          物流商：DHL                         │
│  发货：2026-02-15 08:30    预计到达：2026-02-18 18:00          │
│  货品：HJ-LA23 500件         重量：120kg                        │
│                                                                  │
│  【当前位置】                                                    │
│  📍 南京市江宁区                    当前状态：运输中              │
│  最后更新：02-17 14:30                                        │
│                                                                  │
│  【轨迹】                                                        │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │ 02-15 08:30  青岛仓库           📦 已揽收                 │  │
│  │ 02-15 18:00  青岛转运中心       🚚 发往南京               │  │
│  │ 02-16 08:00  南京转运中心       📍 到达                   │  │
│  │ 02-17 14:30  南京江宁营业部     🚚 派送中                 │  │
│  │ 02-18 18:00  预计送达          ⏰ 预计                   │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                  │
│  【关联订单】                                                    │
│  PO-2026-001  │  SO-2026-005  │  客户：A 医院                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. API 接口设计

### 3.1 物流追踪接口

```java
/**
 * 物流追踪接口
 */
@RestController
@RequestMapping("/api/logistics")
public class LogisticsController {
    
    /**
     * 获取在途物料列表
     */
    @GetMapping("/in-transit")
    public List<InTransitDTO> getInTransitList(
            @RequestParam(required = false) String logisticsProvider,
            @RequestParam(required = false) String status) {
        return logisticsService.getInTransitList(provider, status);
    }
    
    /**
     * 获取物流轨迹
     */
    @GetMapping("/tracking/{trackingNo}")
    public TrackingDetailDTO getTracking(@PathVariable String trackingNo) {
        return logisticsService.getTracking(trackingNo);
    }
}
```

---

## 4. 验收标准

### 4.1 功能验收

| 场景 | 输入 | 预期输出 | 验收条件 |
|------|------|---------|----------|
| 在途地图 | 筛选条件 | 正确展示 | 位置准确 |
| 轨迹查询 | 运单号 | 完整轨迹 | 时间线完整 |
| 订单关联 | 订单号 | 物流信息 | 关联正确 |

---

> **文档版本**: v1.0  
> **最后更新**: 2026-02-14  
> **状态**: 待评审
