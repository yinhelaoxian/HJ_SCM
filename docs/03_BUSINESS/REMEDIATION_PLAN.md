# HJ_SCM V3.3 整改实施计划

> 计划日期: 2026-02-13  
> 计划人: 业务专家 (Business Expert)  
> 整改周期: 6周（255人天）

---

## 一、整改总览

### 1.1 整改范围

```
8项整改内容：

P0级（本周 - 2项）：
├── 1. 预警规则引擎
└── 2. ATP可承诺量检查

P1级（本月 - 4项）：
├── 3. 情景模拟能力
├── 4. S&OP差异分析
├── 5. S&OP会议管理
└── 6. RCCP粗能力核查

P2级（本月-下月 - 2项）：
├── 7. 供应商绩效管理
└── 8. 决策支持系统
```

### 1.2 实施时间表

```
Week 1 (02/13-02/19)
├── P0-1: 预警规则引擎（架构+核心）
└── P0-2: ATP可承诺量（架构+核心）

Week 2 (02/20-02/26)
├── P0-1: 预警规则引擎（界面+集成）
├── P0-2: ATP可承诺量（界面+集成）
├── P1-3: 情景模拟（基础）
└── P1-4: S&OP差异分析（基础）

Week 3 (02/27-03/05)
├── P1-3: 情景模拟（增强）
├── P1-4: S&OP差异分析（增强）
├── P1-5: S&OP会议管理
└── P1-6: RCCP粗能力核查

Week 4 (03/06-03/12)
├── P1-5: S&OP会议管理（增强）
├── P1-6: RCCP粗能力核查（增强）
├── P2-7: 供应商绩效管理（基础）
└── P2-8: 决策支持系统（基础）

Week 5-6 (03/13-03/26)
├── P2-7: 供应商绩效管理（增强+闭环）
└── P2-8: 决策支持系统（增强+闭环）
```

### 1.3 资源分配

```
团队配置：

角色                Week1-2    Week3-4    Week5-6
───────────────────────────────────────────────
产品经理            50%        50%        50%
系统架构师          30%        30%        30%
高级工程师          100%       100%       100%
QA测试员           50%        80%        80%
交付官             20%        20%        20%
业务专家           100%       50%        30%
```

---

## 二、P0级整改（Week 1）

### 2.1 预警规则引擎

#### 2.1.1 任务分解

```
任务1：规则引擎核心（3人天）
├── 1.1 规则数据模型设计（0.5人天）
│   ├── Rule主数据（id、name、description、enabled）
│   ├── RuleCondition（条件：field、operator、value）
│   ├── RuleAction（动作：type、target、template）
│   └── RuleEscalation（升级：level、timeout、notify）
│
├── 1.2 规则解析引擎（1.5人天）
│   ├── 条件解析器（field + operator + value）
│   ├── 条件组合器（AND/OR/NOT）
│   ├── 动作执行器（notification、email、webhook）
│   └── 规则调度器（定时检查、事件触发）
│
└── 1.3 规则API设计（1人天）
    ├── POST /api/rules（创建规则）
    ├── GET /api/rules（规则列表）
    ├── GET /api/rules/:id（规则详情）
    ├── PUT /api/rules/:id（更新规则）
    ├── DELETE /api/rules/:id（删除规则）
    ├── POST /api/rules/:id/enable（启用）
    ├── POST /api/rules/:id/disable（禁用）
    ├── POST /api/rules/test（测试规则）
    └── POST /api/rules/evaluate（手动触发）
```

#### 2.1.2 实施计划

```
Day 1 (02/13)
├── 上午：
│   ├── 产品经理：编写PRD、确定规则类型
│   ├── 架构师：设计数据模型、API规范
│   └── 工程师：创建数据库表、基础架构
│
└── 下午：
    ├── 工程师：实现规则解析引擎核心
    └── QA：编写测试用例

Day 2 (02/14)
├── 上午：工程师实现规则调度器
└── 下午：工程师实现规则API

Day 3 (02/15)
├── 上午：工程师实现规则界面
└── 下午：集成测试、修复Bug

Day 4-5 (02/16-02/17)
├── 前端：规则管理界面开发
├── 后端：API完善、性能优化
└── QA：功能测试、性能测试

Day 6-7 (02/18-02/19)
├── 集成测试
├── Bug修复
└── 验收
```

#### 2.1.3 验收标准

```
功能验收：
├── 规则CRUD ✅
├── 条件组合（AND/OR/NOT）✅
├── 动作执行（站内/邮件/钉钉）✅
├── 规则调度（定时/事件）✅
└── 规则升级（多级升级）✅

性能验收：
├── 规则评估延迟 < 100ms ✅
├── 支持1000+规则 ✅
└── 每日触发10000+次 ✅
```

---

### 2.2 ATP可承诺量检查

#### 2.2.1 任务分解

```
任务2：ATP核心引擎（4人天）
├── 2.1 ATP数据模型（1人天）
│   ├── ProductMaster（物料主数据）
│   ├── LocationMaster（地点主数据）
│   ├── Inventory（库存：onHand、reserved、available）
│   ├── Supply（供应：PO、MO、计划接收）
│   └── Demand（需求：SO、预测、预留）
│
├── 2.2 ATP计算引擎（2人天）
│   ├── AvailableToPromise（可用库存ATP）
│   ├── PlannedReceipt（计划接收ATP）
│   ├── ConfirmedSupply（已确认供应ATP）
│   └── CapableToPromise（能力ATP）
│
└── 2.3 ATP API设计（1人天）
    ├── POST /api/atp/check（ATP检查）
    ├── POST /api/atp/check-detail（详细ATP）
    ├── POST /api/atp/ctp（CTP能力承诺）
    └── GET /api/atp/summary（ATP汇总）
```

#### 2.2.2 实施计划

```
Day 1 (02/13)
├── 上午：
│   ├── 产品经理：确定ATP策略（客户优先级/订单优先级）
│   ├── 架构师：设计ATP算法、数据流
│   └── 工程师：创建数据模型
│
└── 下午：
    └── 工程师：实现ATP计算核心逻辑

Day 2-3 (02/14-02/15)
├── 工程师：实现CTP能力承诺
├── 工程师：实现ATP API
└── QA：编写ATP测试用例

Day 4-5 (02/16-02/17)
├── 前端：ATP检查界面开发
├── 后端：API完善、错误处理
└── QA：ATP功能测试、性能测试

Day 6-7 (02/18-02/19)
├── 集成测试
├── Bug修复
└── 验收
```

#### 2.2.3 验收标准

```
功能验收：
├── 库存ATP检查 ✅
├── 计划接收ATP ✅
├── CTP能力承诺 ✅
├── 替代料ATP ✅
└── 跨地点ATP ✅

性能验收：
├── ATP计算延迟 < 500ms ✅
├── 支持1000+订单并发 ✅
└── 数据实时更新 ✅
```

---

## 三、P1级整改（Week 2-3）

### 3.1 情景模拟能力

#### 3.1.1 任务分解

```
任务3：情景模拟（4人天）
├── 3.1 情景模型设计（1人天）
│   ├── Scenario（情景：id、name、description、status）
│   ├── ScenarioParameter（参数：product、supply、demand）
│   ├── ScenarioResult（结果：inventory、gap、cost）
│   └── ScenarioVersion（版本管理）
│
├── 3.2 模拟引擎（2人天）
│   ├── 参数化模拟（输入参数 → 输出结果）
│   ├── 情景对比（多情景并排对比）
│   └── 敏感性分析（参数变化影响）
│
└── 3.3 预置情景（1人天）
    ├── "Bühler断供6周"
    ├── "IKEA提前3周"
    ├── "泰国产能提升50%"
    └── "需求增长20%"
```

### 3.2 S&OP差异分析

#### 3.2.1 任务分解

```
任务4：差异分析（4人天）
├── 4.1 差异计算引擎（1.5人天）
│   ├── DemandVariance（需求差异）
│   ├── SupplyVariance（供应差异）
│   ├── FinancialVariance（财务差异）
│   └── Variance Attribution（差异归因）
│
├── 4.2 差异展示（1.5人天）
│   ├── 瀑布图（展示差异分解）
│   ├── 表格（明细数据）
│   └── 下钻功能（差异原因）
│
└── 4.3 责任归属（1人天）
    ├── 责任配置（部门/责任类型）
    └── 任务创建（差异→行动项）
```

### 3.3 S&OP会议管理

#### 3.3.1 任务分解

```
任务5：会议管理（3人天）
├── 5.1 会议数据模型（1人天）
│   ├── Meeting（会议：id、title、date、status）
│   ├── MeetingAgenda（议程：items、order）
│   ├── MeetingMinute（纪要：content、决议）
│   └── MeetingAction（行动项：assignee、dueDate）
│
├── 5.2 会议流程（1人天）
│   ├── 会议创建和发布
│   ├── 议程管理
│   ├── 实时签到
│   └── 决议记录
│
└── 5.3 行动项跟踪（1人天）
    ├── 行动项列表
    ├── 完成确认
    └── 逾期提醒
```

### 3.4 RCCP粗能力核查

#### 3.4.1 任务分解

```
任务6：粗能力核查（4人天）
├── 6.1 能力数据模型（1人天）
│   ├── WorkCenter（工作中心）
│   ├── ResourceCapacity（资源能力）
│   ├── AvailableCapacity（可用能力）
│   └── CapacityUtilization（产能利用率）
│
├── 6.2 RCCP计算引擎（2人天）
│   ├── AvailableCapacity（可用能力 = 理论能力 - 计划维护 - 已分配）
│   ├── RequiredCapacity（所需能力 = 需求 × 标准工时）
│   └── UtilizationCalculation（利用率 = 所需/可用 × 100%）
│
└── 6.3 产能展示（1人天）
    ├── 产能利用率图表
    ├── 超载预警
    └── 优化建议
```

---

## 四、P2级整改（Week 4-6）

### 4.1 供应商绩效管理

#### 4.1.1 任务分解

```
任务7：供应商绩效（5人天）
├── 7.1 绩效数据模型（1人天）
│   ├── SupplierScore（供应商评分）
│   ├── ScoreItem（评分项：OTD、质量、价格、服务）
│   ├── ScoreWeight（权重配置）
│   └── ScoreTrend（评分趋势）
│
├── 7.2 绩效计算引擎（2人天）
│   ├── OTD计算（准时交付率）
│   ├── Quality计算（质量合格率）
│   ├── Cost计算（价格竞争力）
│   └── Service计算（响应速度）
│
├── 7.3 绩效展示（1人天）
│   ├── 综合评分雷达图
│   ├── 趋势折线图
│   └── 同行对比
│
└── 7.4 绩效闭环（1人天）
    ├── 绩效反馈
    ├── 改进计划
    └── 效果跟踪
```

### 4.2 决策支持系统

#### 4.2.1 任务分解

```
任务8：决策支持（5人天）
├── 8.1 决策模型（1.5人天）
│   ├── DecisionType（决策类型）
│   ├── DecisionContext（决策上下文）
│   ├── DecisionOption（决策选项）
│   └── DecisionRecommendation（推荐）
│
├── 8.2 推荐引擎（2人天）
│   ├── 规则型推荐（基于规则）
│   ├── AI型推荐（基于ML）
│   └── 混合推荐（规则+AI）
│
├── 8.3 决策展示（1人天）
│   ├── 推荐卡片
│   ├── 对比视图
│   └── 置信度展示
│
└── 8.4 反馈闭环（0.5人天）
    ├── 推荐采纳
    └── 效果跟踪
```

---

## 五、多代理协作计划

### 5.1 Week 1 协作计划

```
周一 (02/13) - 启动日

上午：
├── 9:00-10:00 - 站会（所有角色）
│   ├── 产品经理：介绍P0整改范围
│   ├── 架构师：设计评审
│   └── 工程师：任务分配
│
├── 10:00-12:00 - 并行工作
│   ├── 高级工程师：创建预警规则数据模型
│   └── 高级工程师：创建ATP数据模型
│
├── 14:00-17:00 - 并行工作
│   ├── 高级工程师：实现规则解析引擎
│   └── 高级工程师：实现ATP计算核心
│
└── 17:00-18:00 - 站会收尾
    └── 进度同步、Bug报告

周二-周五（02/14-02/17）
├── 高级工程师：继续核心实现
├── QA：编写测试用例
├── 产品经理：编写PRD文档
└── 业务专家：验收标准评审
```

### 5.2 Week 2-3 协作计划

```
并行Track：

Track A：预警规则 + ATP（3人）
├── 高级工程师：规则界面 + ATP界面
├── QA：集成测试
└── 业务专家：验收准备

Track B：情景模拟 + 差异分析（2人）
├── 高级工程师：情景引擎 + 差异计算
└── 产品经理：PRD评审

Track C：会议管理 + RCCP（2人）
├── 高级工程师：会议模块 + RCCP引擎
└── 业务专家：流程设计
```

### 5.3 Week 4-6 协作计划

```
并行Track：

Track A：供应商绩效（2人）
├── 高级工程师：绩效引擎 + 展示
└── QA：绩效测试

Track B：决策支持（2人）
├── 高级工程师：推荐引擎 + 展示
└── QA：推荐测试

Track C：集成测试（1人）
├── QA：全模块集成测试
└── 交付官：部署准备
```

---

## 六、风险与应对

### 6.1 技术风险

```
风险1：ATP算法复杂度高
├── 可能性：中
├── 影响：进度延迟
├── 应对：分阶段实现，先基础后增强
└── 缓解：预留2人天缓冲

风险2：AI推荐效果不达预期
├── 可能性：高
├── 影响：功能价值降低
├── 应对：先基于规则，AI作为增强
└── 缓解：收集用户反馈持续优化
```

### 6.2 资源风险

```
风险3：工程师资源不足
├── 可能性：低
├── 影响：进度延迟
├── 应对：合理分配任务优先级
└── 缓解：必要时外包部分工作

风险4：需求变更频繁
├── 可能性：中
├── 影响：返工
├── 应对：需求冻结窗口
└── 缓解：双周评审机制
```

### 6.3 业务风险

```
风险5：用户采用率低
├── 可能性：中
├── 影响：功能价值无法体现
├── 应对：加强用户培训
└── 缓解：试点推广、逐步扩展

风险6：数据质量差
├── 可能性：高
├── 影响：计算结果不准确
├── 应对：数据清洗工具
└── 缓解：数据验证关卡
```

---

## 七、质量保障

### 7.1 测试策略

```
单元测试：
├── 覆盖率要求：>80%
├── 工具：Jest/Vitest
└── 执行：每次提交自动运行

集成测试：
├── 范围：API端到端
├── 工具：Playwright
└── 执行：每日构建运行

性能测试：
├── 范围：ATP/规则引擎
├── 工具：k6/JMeter
└── 执行：每周一次

用户验收测试：
├── 范围：核心功能
├── 执行：每迭代结束
└── 负责人：业务专家
```

### 7.2 发布策略

```
发布窗口：
├── 每周三：常规发布
└── 每月第一个周三：大版本发布

回滚策略：
├── 自动回滚：错误率>1%
└── 手动回滚：业务反馈差

灰度发布：
├── 第1周：5%用户
├── 第2周：20%用户
├── 第3周：50%用户
└── 第4周：100%用户
```

---

## 八、成功指标

### 8.1 交付指标

```
准时交付率：>90%
缺陷密度：<1/100代码行
测试覆盖率：>80%
用户满意度：>4.0/5.0
```

### 8.2 业务指标

```
预警覆盖率：从0% → 80%
ATP准确率：<95%
情景模拟使用率：>50%用户
RCCP使用率：>70%排程用户
```

---

*计划版本: v1.0*
*计划人: 业务专家*
*创建时间: 2026-02-13*
## Week 1整改状态

### ✅ 已完成

| 任务 | 状态 | 进度 |
|------|------|------|
| 预警规则引擎类型定义 | ✅ 完成 | 100% |
| 预警规则解析引擎 | ✅ 完成 | 100% |
| 预警规则管理界面 | ✅ 完成 | 100% |
| ATP可承诺量界面 | ✅ 完成 | 100% |
| App.tsx路由更新 | ✅ 完成 | 100% |

### ⏳ 进行中

| 任务 | 状态 | 进度 |
|------|------|------|
| 规则API后端 | ⏳ 进行中 | 60% |
| ATP API后端 | ⏳ 进行中 | 60% |

### 📅 Week 2计划

| 任务 | 负责人 | 目标 |
|------|---------|------|
| 规则API完善 | Senior Engineer | Day 3 |
| ATP API完善 | Senior Engineer | Day 3 |
| 规则界面增强 | Senior Engineer | Day 4 |
| ATP界面增强 | Senior Engineer | Day 4 |
| 集成测试 | QA Tester | Day 5 |
| 验收 | 业务专家 | Day 5 |

### 📊 整体进度

```
Week 1进度: 50%
├── 预警规则引擎: 80%
└── ATP可承诺量: 80%
```

